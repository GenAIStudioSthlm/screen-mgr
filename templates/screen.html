<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Screen Controller for {{ screen_id }}</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: radial-gradient(circle,
          rgb(251, 63, 185) 0%,
          rgb(8, 5, 5) 100%);
      padding-left: 20%;
      padding-right: 20%;
    }

    h1 {
      color: #f6c6ce;
      text-shadow: black 3px 3px 1px;
    }
  </style>
</head>

<body class="">
  <div class="mx-auto p-4 w-full max-w-2xl">
    <img src="/static/genaistudio.png" alt="Genaistudio" class="max-w-sm mx-auto" />
    <h1 class="text-3xl font-bold text-center my-8">
      Studio Screen Controller
    </h1>

    <div class="text-center">
      <div class="flex justify-center mb-3">
        <div id="connection_status_true" class="bg-green-500 font-bold px-4 py-2 hidden">
          Connected
        </div>
        <div id="connection_status_false" class="bg-red-500 font-bold px-4 py-2">
          Not connected
        </div>
      </div>
      <div class="flex justify-center">
        <div class="mb-2">Screen ID:</div>
        <div class="mb-2">{{ screen_id }}</div>
      </div>
      <div class="flex justify-center">
        <div class="mb-4">URL:</div>
        <div id="content_url"></div>
      </div>
      <div class="flex justify-center">
        <button id="connect_button" onclick="connect()"
          class="bg-black hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
          Connect
        </button>
        <button id="update_button" onclick="reloadContentWindow('{{ content_url }}')"
          class="bg-black hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
          Update
        </button>
      </div>
    </div>
  </div>

  <script>
    window.contentUrl = "{{content_url}}";
    const isSecure = window.location.protocol === 'https:';
    const wsProtocol = isSecure ? 'wss' : 'ws';
    window.ws_url = `${wsProtocol}://${window.location.host}/ws/{{screen_id}}`;

  </script>
  <script src="/static/javascript/screen.js"></script>

</body>

</html>