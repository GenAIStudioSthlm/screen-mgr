<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI News</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --hud-cyan: #00f0ff;
      --hud-blue: #0080ff;
      --hud-dim: #004466;
      --hud-bg: #0a0e14;
      --hud-panel: #0d1117;
      --hud-border: #1a2332;
      --hud-text: #c0e8ff;
      --hud-white: #e8f4ff;
    }

    html, body {
      height: 100%;
      overflow: hidden;
      font-family: 'Share Tech Mono', monospace;
      background: var(--hud-bg);
      color: var(--hud-text);
    }

    /* Subtle grid background */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(0, 240, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 240, 255, 0.03) 1px, transparent 1px);
      background-size: 20px 20px;
      pointer-events: none;
    }

    /* Scan line */
    .scan-line {
      position: fixed;
      left: 0; right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--hud-cyan), transparent);
      opacity: 0.3;
      animation: scan 4s linear infinite;
      z-index: 100;
      pointer-events: none;
    }
    @keyframes scan { from { top: 0; } to { top: 100%; } }

    /* HUD Frame */
    .hud-frame {
      position: absolute;
      inset: 8px;
      border: 1px solid var(--hud-dim);
      pointer-events: none;
      z-index: 5;
    }
    /* Corner cuts */
    .hud-frame::before, .hud-frame::after {
      content: '';
      position: absolute;
      width: 30px;
      height: 30px;
      border: 1px solid var(--hud-cyan);
    }
    .hud-frame::before {
      top: -1px; left: -1px;
      border-right: none; border-bottom: none;
    }
    .hud-frame::after {
      top: -1px; right: -1px;
      border-left: none; border-bottom: none;
    }
    .corner-bl, .corner-br {
      position: absolute;
      width: 30px;
      height: 30px;
      border: 1px solid var(--hud-cyan);
    }
    .corner-bl { bottom: -1px; left: -1px; border-right: none; border-top: none; }
    .corner-br { bottom: -1px; right: -1px; border-left: none; border-top: none; }

    /* Tick marks */
    .tick-marks {
      position: absolute;
      display: flex;
      gap: 8px;
    }
    .tick-marks.top { top: 4px; left: 50%; transform: translateX(-50%); }
    .tick-marks.bottom { bottom: 4px; left: 50%; transform: translateX(-50%); }
    .tick {
      width: 1px;
      height: 6px;
      background: var(--hud-dim);
    }
    .tick.long { height: 10px; background: var(--hud-cyan); }

    .slide {
      opacity: 0;
      transition: opacity 0.5s ease;
      position: absolute;
      inset: 0;
      z-index: 10;
    }
    .slide.active { opacity: 1; }

    /* Data panel styling */
    .data-panel {
      background: linear-gradient(135deg, rgba(13, 17, 23, 0.95), rgba(10, 14, 20, 0.98));
      border: 1px solid var(--hud-border);
      position: relative;
    }
    .data-panel::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 2px;
      background: linear-gradient(90deg, transparent, var(--hud-cyan), transparent);
    }

    .news-image {
      background-size: cover;
      background-position: center;
      background-color: var(--hud-panel);
      border: 1px solid var(--hud-cyan);
      position: relative;
    }
    .news-image::before {
      content: 'IMAGE.DATA';
      position: absolute;
      top: 4px; left: 6px;
      font-size: 8px;
      color: var(--hud-cyan);
      letter-spacing: 1px;
    }
    .news-image::after {
      content: '';
      position: absolute;
      inset: 0;
      border: 1px solid var(--hud-cyan);
      opacity: 0.3;
      margin: 4px;
    }

    .category-tag {
      display: inline-block;
      background: transparent;
      color: var(--hud-cyan);
      padding: 4px 12px;
      font-size: 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
      border: 1px solid var(--hud-cyan);
      position: relative;
    }
    .category-tag::before, .category-tag::after {
      content: '';
      position: absolute;
      width: 4px; height: 4px;
      border: 1px solid var(--hud-cyan);
    }
    .category-tag::before { top: -2px; left: -2px; border-right: none; border-bottom: none; }
    .category-tag::after { bottom: -2px; right: -2px; border-left: none; border-top: none; }

    .title-text {
      font-family: 'Orbitron', sans-serif;
      color: var(--hud-white);
      font-weight: 700;
      line-height: 1.3;
    }

    .data-readout {
      font-size: 9px;
      color: var(--hud-dim);
      letter-spacing: 1px;
    }

    .source-line {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
    }
    .source-line::before {
      content: '>';
      color: var(--hud-cyan);
    }

    /* Status indicators */
    .status-dot {
      width: 6px;
      height: 6px;
      background: var(--hud-cyan);
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .nav-dots {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .nav-dot {
      width: 8px;
      height: 8px;
      border: 1px solid var(--hud-dim);
      background: transparent;
      transition: all 0.3s;
    }
    .nav-dot.active {
      background: var(--hud-cyan);
      border-color: var(--hud-cyan);
      box-shadow: 0 0 8px var(--hud-cyan);
    }

    /* Coordinate display */
    .coords {
      position: absolute;
      font-size: 8px;
      color: var(--hud-dim);
      letter-spacing: 1px;
    }
    .coords.tl { top: 12px; left: 12px; }
    .coords.tr { top: 12px; right: 12px; text-align: right; }
    .coords.bl { bottom: 12px; left: 12px; }
    .coords.br { bottom: 12px; right: 12px; text-align: right; }
  </style>
</head>

<body>
  <div class="scan-line"></div>

  <!-- HUD Frame -->
  <div class="hud-frame">
    <div class="corner-bl"></div>
    <div class="corner-br"></div>
    <div class="tick-marks top">
      <div class="tick"></div><div class="tick"></div><div class="tick long"></div>
      <div class="tick"></div><div class="tick"></div><div class="tick long"></div>
      <div class="tick"></div><div class="tick"></div>
    </div>
    <div class="tick-marks bottom">
      <div class="tick"></div><div class="tick"></div><div class="tick long"></div>
      <div class="tick"></div><div class="tick"></div><div class="tick long"></div>
      <div class="tick"></div><div class="tick"></div>
    </div>
  </div>

  <!-- Corner coordinates -->
  <div class="coords tl">SYS.STATUS: ONLINE<br>FEED.ACTIVE</div>
  <div class="coords tr">{{ now().strftime('%H:%M:%S') }}<br>WEEK.{{ now().isocalendar()[1] }}</div>

  <div id="news-container" class="h-full w-full relative">
    {% if articles %}
    {% for article in articles %}
    <div class="slide flex flex-col h-full p-6 pt-8 {% if loop.first %}active{% endif %}" data-index="{{ loop.index0 }}">

      <!-- Header -->
      <div class="flex justify-between items-center mb-3">
        <div class="category-tag">{{ article.category or 'INTEL' }}</div>
        <div class="data-readout">ARTICLE.{{ "%03d"|format(loop.index) }}</div>
      </div>

      <!-- Image Panel -->
      <div class="news-image h-1/3 mb-3"
        style="background-image: url('{{ article.image_url or '/static/pictures/default_portrait.png' }}')">
      </div>

      <!-- Content Panel -->
      <div class="data-panel flex-1 p-4 flex flex-col">
        <div class="data-readout mb-2">// HEADLINE.DATA</div>
        <h1 class="title-text text-lg mb-3">
          {{ article.title[:70] }}{% if article.title|length > 70 %}...{% endif %}
        </h1>
        <p class="text-xs leading-relaxed mb-3 opacity-80">
          {{ article.summary[:140] }}{% if article.summary|length > 140 %}...{% endif %}
        </p>
        <div class="mt-auto">
          <div class="source-line">
            <span class="status-dot"></span>
            <span style="color: var(--hud-cyan);">{{ article.source_name }}</span>
            {% if article.published_date %}
            <span style="color: var(--hud-dim);">|</span>
            <span>{{ article.published_date.strftime('%Y.%m.%d') }}</span>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Navigation -->
      <div class="flex justify-center items-center py-3 gap-2">
        <span class="data-readout">{{ loop.index }}/{{ articles|length }}</span>
        <div class="nav-dots">
          {% for i in range(articles|length) %}
          <div class="nav-dot {% if i == loop.index0 %}active{% endif %}"></div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="h-full flex items-center justify-center">
      <div class="data-panel p-8 text-center">
        <div class="data-readout mb-4">// NO.DATA.FOUND</div>
        <div class="title-text text-xl">AWAITING FEED</div>
        <div class="mt-2 text-xs opacity-60">Check back later for updates</div>
      </div>
    </div>
    {% endif %}
  </div>

  <script>
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    let currentSlide = 0;
    const rotationSeconds = {{ rotation_seconds }};

    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
        const dots = slide.querySelectorAll('.nav-dot');
        dots.forEach((dot, j) => dot.classList.toggle('active', j === index));
      });
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      showSlide(currentSlide);
    }

    if (totalSlides > 1) {
      setInterval(nextSlide, rotationSeconds * 1000);
    }
  </script>
</body>
</html>
