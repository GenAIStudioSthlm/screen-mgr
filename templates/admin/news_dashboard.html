<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>News Dashboard - Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <style>
    body {
      background: radial-gradient(circle, rgb(251, 63, 185) 0%, rgb(8, 5, 5) 100%);
    }
    h1 { color: #f6c6ce; text-shadow: black 3px 3px 1px; }
  </style>
</head>

<body class="mx-auto p-4 w-full max-w-4xl">
  <div class="flex flex-col gap-4">
    <div class="w-full flex flex-col">
      <img src="/static/genaistudio.png" alt="Genaistudio" class="max-w-sm mx-auto" />
      <h1 class="text-3xl font-bold text-center mt-8 mb-3">AI News Manager</h1>
    </div>

    <!-- Navigation -->
    <div class="flex gap-2 justify-center mb-4">
      <a href="/admin" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">&larr; Back to Admin</a>
      <a href="/admin/news" class="bg-pink-600 text-white px-4 py-2 rounded hover:bg-pink-700">Dashboard</a>
      <a href="/admin/news/sources" class="bg-white text-gray-700 px-4 py-2 rounded hover:bg-gray-100">Sources</a>
      <a href="/admin/news/articles" class="bg-white text-gray-700 px-4 py-2 rounded hover:bg-gray-100">Articles</a>
      <a href="/admin/news/playlists" class="bg-white text-gray-700 px-4 py-2 rounded hover:bg-gray-100">Playlists</a>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-4 gap-4">
      <div class="bg-white rounded-lg p-4 text-center shadow">
        <div class="text-3xl font-bold text-pink-600">{{ sources|length }}</div>
        <div class="text-gray-600">Sources</div>
      </div>
      <div class="bg-white rounded-lg p-4 text-center shadow">
        <div class="text-3xl font-bold text-yellow-600">{{ pending_count }}</div>
        <div class="text-gray-600">Pending</div>
      </div>
      <div class="bg-white rounded-lg p-4 text-center shadow">
        <div class="text-3xl font-bold text-green-600">{{ approved_count }}</div>
        <div class="text-gray-600">Approved</div>
      </div>
      <div class="bg-white rounded-lg p-4 text-center shadow">
        <div class="text-3xl font-bold text-blue-600">{{ playlists|length }}</div>
        <div class="text-gray-600">Playlists</div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="bg-white rounded-lg p-4 shadow">
      <h2 class="text-xl font-bold mb-4">Quick Actions</h2>
      <div class="flex gap-4 flex-wrap">
        <form action="/admin/news/fetch" method="POST">
          <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            Fetch New Articles
          </button>
        </form>
        <form action="/admin/news/playlists/generate" method="POST">
          <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
            Generate Weekly Playlist
          </button>
        </form>
        <a href="/admin/news/articles?status=pending" class="bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700">
          Review Pending ({{ pending_count }})
        </a>
      </div>
    </div>

    <!-- Preview Links -->
    <div class="bg-white rounded-lg p-4 shadow">
      <h2 class="text-xl font-bold mb-4">Preview Display Modes</h2>
      <div class="flex gap-4">
        <a href="/news/portrait" target="_blank" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
          Portrait Mode
        </a>
        <a href="/news/landscape" target="_blank" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
          Landscape Mode
        </a>
        <a href="/news/presentation" target="_blank" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
          Presentation Mode
        </a>
      </div>
    </div>

    <!-- Recent Articles -->
    <div class="bg-white rounded-lg p-4 shadow">
      <h2 class="text-xl font-bold mb-4">Recent Articles</h2>
      {% if articles %}
      <div class="space-y-2">
        {% for article in articles[:10] %}
        <div class="flex items-center justify-between p-2 border-b">
          <div class="flex-1">
            <div class="font-medium truncate">{{ article.title }}</div>
            <div class="text-sm text-gray-500">{{ article.source_name }}</div>
          </div>
          <span class="px-2 py-1 text-xs rounded
            {% if article.status == 'approved' %}bg-green-100 text-green-800
            {% elif article.status == 'featured' %}bg-blue-100 text-blue-800
            {% elif article.status == 'pending' %}bg-yellow-100 text-yellow-800
            {% else %}bg-red-100 text-red-800{% endif %}">
            {{ article.status }}
          </span>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="text-gray-500">No articles yet. Click "Fetch New Articles" to get started.</p>
      {% endif %}
    </div>

  </div>
</body>
</html>
